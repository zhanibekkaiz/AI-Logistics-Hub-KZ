# üîç Code Review: AI –¢–∞–º–æ–∂–µ–Ω–Ω—ã–π –ë—Ä–æ–∫–µ—Ä

## üìã –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∞–Ω–∞–ª–∏–∑–∞
- **TRIZ**: –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–π
- **5 Why**: –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä–Ω–µ–≤—ã—Ö –ø—Ä–∏—á–∏–Ω –ø—Ä–æ–±–ª–µ–º
- **Best Practices**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

## üî¥ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ AI —Å–µ—Ä–≤–∏—Å–∞ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
**–ü—Ä–æ–±–ª–µ–º–∞**: `suggest_hs_codes()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ async —Ñ—É–Ω–∫—Ü–∏–∏
**5 Why**:
- –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞? –ë–ª–æ–∫–∏—Ä—É–µ—Ç event loop
- –ü–æ—á–µ–º—É –±–ª–æ–∫–∏—Ä—É–µ—Ç? –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –≤ async –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- –ü–æ—á–µ–º—É —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π? –§—É–Ω–∫—Ü–∏—è –Ω–µ async
- –ü–æ—á–µ–º—É –Ω–µ async? –ù–µ –±—ã–ª–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–∞–∫ async
- –ü–æ—á–µ–º—É –Ω–µ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞? –ù–µ —É—á—Ç–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ aiogram

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ**: –°–¥–µ–ª–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é async –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å executor

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤ –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –ï–≠–ö –∏ Gemini
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –ú–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
- –ü–æ—á–µ–º—É –∑–∞–≤–∏—Å–Ω—É—Ç—å? –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ—á–µ–º—É –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è? –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ? –ù–µ —É—á—Ç–µ–Ω–æ –≤ –¥–∏–∑–∞–π–Ω–µ
- –ü–æ—á–µ–º—É –Ω–µ —É—á—Ç–µ–Ω–æ? –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ—Å—Ç–æ—Ç–æ–π
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ retry –ª–æ–≥–∏–∫–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–±–æ–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ—à–∏–±–∫–∞–º
- –ü–æ—á–µ–º—É –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ—à–∏–±–∫–∞–º? –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- –ü–æ—á–µ–º—É –Ω–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫? –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ? –ù–µ —É—á—Ç–µ–Ω–æ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö
- –ü–æ—á–µ–º—É –Ω–µ —É—á—Ç–µ–Ω–æ? –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ failure modes

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å exponential backoff retry

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–∞, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –∞—Ç–∞–∫–∏
- –ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫–∏? –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü–æ—á–µ–º—É –Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏? –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ? –ù–µ —É—á—Ç–µ–Ω–æ –≤ –¥–∏–∑–∞–π–Ω–µ
- –ü–æ—á–µ–º—É –Ω–µ —É—á—Ç–µ–Ω–æ? –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —É–¥–æ–±—Å—Ç–≤–æ–º
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 5. –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∏–µ–Ω—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ì–ª–æ–±–∞–ª—å–Ω—ã–π `eaeu_client` –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º
- –ü–æ—á–µ–º—É –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º? –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ü–æ—á–µ–º—É –≥–ª–æ–±–∞–ª—å–Ω–æ–µ? –£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ü–æ—á–µ–º—É —É–ø—Ä–æ—â–µ–Ω–∏–µ? –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ü–æ—á–µ–º—É –±—ã—Å—Ç—Ä–∞—è? –ù–µ —É—á—Ç–µ–Ω—ã –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dependency injection –∏–ª–∏ factory pattern

### 6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ structured logging
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –°–ª–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏
- –ü–æ—á–µ–º—É —Å–ª–æ–∂–Ω–æ? –ù–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ü–æ—á–µ–º—É –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π? –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è basic logging
- –ü–æ—á–µ–º—É basic? –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ü–æ—á–µ–º—É –±—ã—Å—Ç—Ä–∞—è? –ù–µ —É—á—Ç–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è observability

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –ø—Ä–æ—Å—Ç–æ—Ç–æ–π –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å structured logging (structlog)

### 7. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –ü–æ—á–µ–º—É –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ? –ù–µ—Ç –º–µ—Ç—Ä–∏–∫
- –ü–æ—á–µ–º—É –Ω–µ—Ç –º–µ—Ç—Ä–∏–∫? –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ? –ù–µ —É—á—Ç–µ–Ω–æ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö
- –ü–æ—á–µ–º—É –Ω–µ —É—á—Ç–µ–Ω–æ? –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ observability

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (success rate, latency, error rate)

### 8. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–∞ –¢–ù –í–≠–î
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API
**5 Why**:
- –ü–æ—á–µ–º—É –ø—Ä–æ–±–ª–µ–º–∞? –ú–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥
- –ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å? –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü–æ—á–µ–º—É –Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏? –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ü–æ—á–µ–º—É –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ? –î–æ–≤–µ—Ä–∏–µ –∫ AI
- –ü–æ—á–µ–º—É –¥–æ–≤–µ—Ä–∏–µ? –ù–µ —É—á—Ç–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫ AI

**TRIZ**: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –º–µ–∂–¥—É –¥–æ–≤–µ—Ä–∏–µ–º –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∞ –∫–æ–¥–∞ (10 —Ü–∏—Ñ—Ä)

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

1. ‚úÖ –°–¥–µ–ª–∞—Ç—å `suggest_hs_codes()` async
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É —Å exponential backoff
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
6. ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å structured logging
7. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
8. ‚úÖ –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–¥–æ–≤ –¢–ù –í–≠–î

